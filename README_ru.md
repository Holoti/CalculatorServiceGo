# HTTP Сервис-калькулятор

[English](README.md)

## Обзор

Школьный проект, сделанный для Яндекс Лицея. Простой калькулятор, вычисляющий результат математического выражения и отправляющий в http.

## Запуск

Порт указывается в `cmd/main.go` (по умолчанию порт `8080`)

Запустите в командной строке:

```
go run cmd/main.go
```

## Использование

Сервис принимает http запросы по адресу `/api/v1/calculate` в данном формате:

```
curl --location 'localhost:8080/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
    "expression": "2+2"
}'
```

Выражение может состоять из чисел и арифметических операций (+, -, *, /, унарный минус и скобки). 

### Примеры

| Тело запроса               | Путь              | Метод        | Код статуса | Сообщение                    |
| -------------------------- | ----------------- | ------------ | ----------- | ---------------------------- |
| `{"expression":"2+2"}`     | /unsupported/path | POST         | 404         | 404 page not found           |
| `{"expression":"2+2"}`     | /api/v1/calculate | Any but POST | 405         | Method not allowed; use POST |
| `{"some":"thing"}`         | /api/v1/calculate | POST         | 400         | Bad request body             |
| `{"expression":"0/0"}`     | /api/v1/calculate | POST         | 422         | Expression is not valid      |
| `{"expression":"2.5+2.5"}` | /api/v1/calculate | POST         | 200         | 5                            |

### Заметки

- Пробелы игнорируются, например, "2 + 2 3" эквивалентно "2+23"
- Пропуск знаков операций около скобок не допускается, например, "2(1+5)" вернёт ошибку, а не "12"
- Унарный минус разрешён только после открывающей скобки или в начале выражения, например, "2*-2" вернёт ошибку, а не "-4"; с другой стороны, "-3+2*(-1)" успешно вернёт "-5"
- Для разделителя десятичных дробей используется точка, а не запятая, например, "2.5" вместо "2,5"